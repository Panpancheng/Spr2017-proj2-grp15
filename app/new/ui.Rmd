---
title: "R Notebook"
output: html_notebook
---

```{r}
library(shiny)
library(shinydashboard)

ui <- dashboardPage(
  dashboardHeader(
    title = "ABC"
  ),
  
  dashboardSidebar(
    sidebarMenu(
    menuItem("A", tabName = "A", icon = icon("dashboard")),
    menuItem("B", tabName = "B",icon = icon("cog"), 
             badgeLabel = "new", badgeColor = "green"),
    menuItem("C", tabName = "C", icon = icon("cog")),
    menuItem("D", tabName = "D", icon = icon("refresh")),
    menuItem("E", tabName = "E", icon = icon("refresh")))
  ),
  
  dashboardBody(
    tabItems(
    tabItem(tabName = "A",
      h2("A tab content"),
      fluidPage(
        titlePanel( 'Compare Data for Multiple Schools'),
          sidebarLayout(
            sidebarPanel(
              checkboxGroupInput(inputId = 'show_schools', 
                                label = 'Schools to compare:',
                                choices = as.character(colnames(t.schools2014)), 
                                selected = as.character(colnames(t.schools2014)[c(1,2)]), 
                                  width = "200px")
            ),
         mainPanel(
            tabsetPanel(
                id = 'criminal.offenses',
                tabPanel('Criminal Offenses', DT::dataTableOutput('criminal.offenses')))
      )))
    ),

    tabItem(tabName = "B",
      h2("B tab content"),
      fluidPage(
        tabsetPanel(
          tabPanel('Total Crimes Trend', plotlyOutput("total.trend")),
          tabPanel('Type Trend', plotlyOutput("type.trend")))
      )

    ),
    
    tabItem(tabName = "C",
      h2("C tab content")
    ),
    
    tabItem(tabName = "D",
      h2("D tab content")
    ),
    
    tabItem(tabName = "E",
      h2("E tab content")
    )
    
  )
  )
)

server <- function(input, output) {
   school <- t.schools2014
    output$criminal.offenses <- DT::renderDataTable({
    DT::datatable(school[, input$show_schools, drop = FALSE], 
                  extensions = 'Buttons', 
                  options = list(pageLength = 25, dom = 'Bfrtip', buttons = I('colvis')),
                  class = "display")
      
    })
     output$total.trend <- renderPlotly({
    plot_ly(agg, x = c(2001:2014), y = agg$total)
  })
  
}

shinyApp(ui, server)
```